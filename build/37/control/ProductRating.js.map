{"version":3,"file":"ProductRating.js","names":["ProductRating","Control","extend","renderer","apiVersion","render","rm","control","tooltip","getTooltip_AsString","openStart","class","attr","openEnd","renderControl","getAggregation","close","metadata","properties","value","type","defaultValue","aggregations","_rating","multiple","visibility","_label","_button","events","change","parameters","constructor","_constructor","id","settings","Control.prototype.constructor.call","this","init","_init","setAggregation","RatingIndicator","getValue","iconSize","liveChange","_onRate","bind","Label","text","addStyleClass","Button","press","_onSubmit","setValue","_setValue","setProperty","reset","_reset","resourceBundle","getModel","getResourceBundle","setDesign","setEnabled","setText","getText","event","getParameter","getSource","getMaxValue","fireEvent"],"sources":["ProductRating.ts"],"sourcesContent":["import Control from \"sap/ui/core/Control\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport { MetadataOptions } from \"sap/ui/core/Element\";\nimport Label from \"sap/m/Label\";\nimport Button, { Button$PressEvent } from \"sap/m/Button\";\nimport RatingIndicator, { RatingIndicator$LiveChangeEvent } from \"sap/m/RatingIndicator\";\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n\n/**\n * @namespace ui5.walkthrough.control\n */\nexport default class ProductRating extends Control {\n\t// The following three lines were generated and should remain as-is to make TypeScript aware of the constructor signatures\n\tconstructor(idOrSettings?: string | $ProductRatingSettings);\n\tconstructor(id?: string, settings?: $ProductRatingSettings);\n\tconstructor(id?: string, settings?: $ProductRatingSettings) { super(id, settings); }\n\n\tstatic readonly metadata: MetadataOptions = {\n\t\tproperties: {\n\t\t\tvalue: {\n\t\t\t\ttype: \"float\",\n\t\t\t\tdefaultValue: 0\n\t\t\t}\n\t\t},\n\t\taggregations: {\n\t\t\t_rating: {\n\t\t\t\ttype: \"sap.m.RatingIndicator\",\n\t\t\t\tmultiple: false,\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t},\n\t\t\t_label: {\n\t\t\t\ttype: \"sap.m.Label\",\n\t\t\t\tmultiple: false,\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t},\n\t\t\t_button: {\n\t\t\t\ttype: \"sap.m.Button\",\n\t\t\t\tmultiple: false,\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t}\n\t\t},\n\t\tevents: {\n\t\t\tchange: {\n\t\t\t\tparameters: {\n\t\t\t\t\t\"value\": \"float\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tinit(): void {\n\t\tthis.setAggregation(\"_rating\", new RatingIndicator({\n\t\t\tvalue: this.getValue(),\n\t\t\ticonSize: \"2rem\",\n\t\t\tliveChange: this._onRate.bind(this)\n\t\t}));\n\t\tthis.setAggregation(\"_label\", new Label({\n\t\t\ttext: \"{i18n>productRatingLabelInitial}\"\n\t\t}).addStyleClass(\"sapUiSmallMargin\"));\n\t\tthis.setAggregation(\"_button\", new Button({\n\t\t\ttext: \"{i18n>productRatingButton}\",\n\t\t\tpress: this._onSubmit.bind(this)\n\t\t}).addStyleClass(\"sapUiTinyMarginTopBottom\"));\n\t}\n\n\tsetValue(value: \"float\" ): ProductRating {\n\t\tthis.setProperty(\"value\", value, true);\n\t\t(this.getAggregation(\"_rating\") as RatingIndicator).setValue(value);\n\n\t\treturn this;\n\t}\n\n\treset(): void {\n\t\tconst resourceBundle = (this?.getModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\n\t\tthis.setValue(0);\n\t\t(this.getAggregation(\"_label\") as Label).setDesign(\"Standard\");\n\t\t(this.getAggregation(\"_rating\") as RatingIndicator).setEnabled(true);\n\t\t(this.getAggregation(\"_label\") as Label).setText(resourceBundle.getText(\"productRatingLabelInitial\"));\n\t\t(this.getAggregation(\"_button\") as Button).setEnabled(true);\n\t}\n\n\t_onRate(event: RatingIndicator$LiveChangeEvent): void {\n\t\tconst resourceBundle = (this?.getModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\t\tconst value = event.getParameter(\"value\");\n\n\t\tthis.setProperty(\"value\", value, true);\n\n\t\t(this.getAggregation(\"_label\") as Label).setText(resourceBundle.getText(\"productRatingLabelIndicator\", [value, (event.getSource() as RatingIndicator).getMaxValue()]));\n\t\t(this.getAggregation(\"_label\") as Label).setDesign(\"Bold\");\n\t}\n\n\t_onSubmit(event: Button$PressEvent): void {\n\t\tconst resourceBundle = (this?.getModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\n\t\t(this.getAggregation(\"_rating\") as RatingIndicator).setEnabled(false);\n\t\t(this.getAggregation(\"_label\") as Label).setText(resourceBundle.getText(\"productRatingLabelFinal\"));\n\t\t(this.getAggregation(\"_button\") as Button).setEnabled(false);\n\t\tthis.fireEvent(\"change\", {\n\t\t\tvalue: this.getValue()\n\t\t})\n\t}\n\n\tstatic renderer = {\n\t\tapiVersion: 4,\n\t\trender: (rm: RenderManager, control: ProductRating) => {\n\t\t\tconst tooltip = control.getTooltip_AsString();\n\t\t\trm.openStart(\"div\", control);\n\t\t\trm.class(\"myAppDemoWTProductRating\");\n\t\t\tif (tooltip) {\n\t\t\t\trm.attr(\"title\", tooltip);\n\t\t\t}\n\t\t\trm.openEnd();\n\t\t\trm.renderControl(control.getAggregation(\"_rating\") as Control);\n\t\t\trm.renderControl(control.getAggregation(\"_label\") as Control);\n\t\t\trm.renderControl(control.getAggregation(\"_button\") as Control);\n\t\t\trm.close(\"div\");\n\t\t}\n\t}\n};\n"],"mappings":"0HASA,MAGqBA,EAAsBC,EAAOC,OAAA,yCA4F1CC,SAAW,CACjBC,WAAY,EACZC,OAAQA,CAACC,EAAmBC,KAC3B,MAAMC,EAAUD,EAAQE,sBACxBH,EAAGI,UAAU,MAAOH,GACpBD,EAAGK,MAAM,4BACT,GAAIH,EAAS,CACZF,EAAGM,KAAK,QAASJ,EAClB,CACAF,EAAGO,UACHP,EAAGQ,cAAcP,EAAQQ,eAAe,YACxCT,EAAGQ,cAAcP,EAAQQ,eAAe,WACxCT,EAAGQ,cAAcP,EAAQQ,eAAe,YACxCT,EAAGU,MAAM,SAnGKC,SAA4B,CAC3CC,WAAY,CACXC,MAAO,CACNC,KAAM,QACNC,aAAc,IAGhBC,aAAc,CACbC,QAAS,CACRH,KAAM,wBACNI,SAAU,MACVC,WAAY,UAEbC,OAAQ,CACPN,KAAM,cACNI,SAAU,MACVC,WAAY,UAEbE,QAAS,CACRP,KAAM,eACNI,SAAU,MACVC,WAAY,WAGdG,OAAQ,CACPC,OAAQ,CACPC,WAAY,CACXX,MAAS,YA7BbY,YAAW,SAAAC,EAACC,EAAaC,GAAqCC,6BAAAC,KAAMH,EAAIC,EAAW,EAmCnFG,KAAI,SAAAC,IACHF,KAAKG,eAAe,UAAW,IAAIC,EAAgB,CAClDrB,MAAOiB,KAAKK,WACZC,SAAU,OACVC,WAAYP,KAAKQ,QAAQC,KAAKT,SAE/BA,KAAKG,eAAe,SAAU,IAAIO,EAAM,CACvCC,KAAM,qCACJC,cAAc,qBACjBZ,KAAKG,eAAe,UAAW,IAAIU,EAAO,CACzCF,KAAM,6BACNG,MAAOd,KAAKe,UAAUN,KAAKT,QACzBY,cAAc,4BAClB,EAEAI,SAAQ,SAAAC,EAAClC,GACRiB,KAAKkB,YAAY,QAASnC,EAAO,MAChCiB,KAAKrB,eAAe,WAA+BqC,SAASjC,GAE7D,OAAOiB,IACR,EAEAmB,MAAK,SAAAC,IACJ,MAAMC,EAAkBrB,MAAMsB,SAAS,SAA2BC,oBAElEvB,KAAKgB,SAAS,GACbhB,KAAKrB,eAAe,UAAoB6C,UAAU,YAClDxB,KAAKrB,eAAe,WAA+B8C,WAAW,MAC9DzB,KAAKrB,eAAe,UAAoB+C,QAAQL,EAAeM,QAAQ,8BACvE3B,KAAKrB,eAAe,WAAsB8C,WAAW,KACvD,EAEAjB,QAAO,SAAAA,EAACoB,GACP,MAAMP,EAAkBrB,MAAMsB,SAAS,SAA2BC,oBAClE,MAAMxC,EAAQ6C,EAAMC,aAAa,SAEjC7B,KAAKkB,YAAY,QAASnC,EAAO,MAEhCiB,KAAKrB,eAAe,UAAoB+C,QAAQL,EAAeM,QAAQ,8BAA+B,CAAC5C,EAAQ6C,EAAME,YAAgCC,iBACrJ/B,KAAKrB,eAAe,UAAoB6C,UAAU,OACpD,EAEAT,UAAS,SAAAA,EAACa,GACT,MAAMP,EAAkBrB,MAAMsB,SAAS,SAA2BC,oBAEjEvB,KAAKrB,eAAe,WAA+B8C,WAAW,OAC9DzB,KAAKrB,eAAe,UAAoB+C,QAAQL,EAAeM,QAAQ,4BACvE3B,KAAKrB,eAAe,WAAsB8C,WAAW,OACtDzB,KAAKgC,UAAU,SAAU,CACxBjD,MAAOiB,KAAKK,YAEd,IAkBC,OA5GmBzC,CAAa","ignoreList":[]}